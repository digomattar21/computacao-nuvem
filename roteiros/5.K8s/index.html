<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Aqui vamos manter os roteiros de aula para facilitar o acesso ao conteudo"><meta name=author content="Tiago Demay"><link href=https://github.com/Insper/computacao-nuvem/roteiros/5.K8s/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.0"><title>Computação em Nuvem - Computação em Nuvem - 2023/2</title><link rel=stylesheet href=../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/insper-education/active-handout-css@main/devlife.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#containers-e-k8s class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Computação em Nuvem - 2023/2" class="md-header__button md-logo" aria-label="Computação em Nuvem - 2023/2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Computação em Nuvem - 2023/2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Computação em Nuvem </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Insper/computacao-nuvem title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> insper.github.io/computacao-nuvem </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../0.Cabeamento/ class=md-tabs__link> Roteiros </a> </li> <li class=md-tabs__item> <a href=../../projetos/0.Cloud_Intro/ class=md-tabs__link> Projetos </a> </li> <li class=md-tabs__item> <a href=../../adicional/ class=md-tabs__link> Conteudo adicional </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Computação em Nuvem - 2023/2" class="md-nav__button md-logo" aria-label="Computação em Nuvem - 2023/2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> Computação em Nuvem - 2023/2 </label> <div class=md-nav__source> <a href=https://github.com/Insper/computacao-nuvem title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> insper.github.io/computacao-nuvem </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Roteiros <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Roteiros data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Roteiros </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../0.Cabeamento/ class=md-nav__link> Roteiro Cabeamento </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> Roteiro 1 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Roteiro 1" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Roteiro 1 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.Bare_metal/ class=md-nav__link> MAAS </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Projetos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projetos data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Projetos </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1> Tutoriais <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutoriais data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Tutoriais </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../projetos/0.Cloud_Intro/ class=md-nav__link> Primeiros Passos </a> </li> <li class=md-nav__item> <a href=../../projetos/construcao/ class=md-nav__link> Cloud na Vida Real </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../adicional/ >Conteudo adicional</a> </div> <nav class=md-nav aria-label="Conteudo adicional" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Conteudo adicional </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado class=md-nav__link> Voce chegou a um roteiro avancado, este Roteiro envolve a resolucao de problemas de implantacao, esperamos que você esteja preparado. </a> </li> <li class=md-nav__item> <a href=#target class=md-nav__link> TARGET </a> <nav class=md-nav aria-label=TARGET> <ul class=md-nav__list> <li class=md-nav__item> <a href=#do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro class=md-nav__link> DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tipo-de-implantacoes class=md-nav__link> Tipo de implantacoes </a> <nav class=md-nav aria-label="Tipo de implantacoes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tradicional class=md-nav__link> Tradicional </a> </li> <li class=md-nav__item> <a href=#virtualizada class=md-nav__link> Virtualizada </a> </li> <li class=md-nav__item> <a href=#conteinerizada class=md-nav__link> Conteinerizada </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#instalando-e-configurando-o-octavia-loadbalancer-para-openstack class=md-nav__link> Instalando e Configurando o Octavia (Loadbalancer para Openstack) </a> <nav class=md-nav aria-label="Instalando e Configurando o Octavia (Loadbalancer para Openstack)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#voces-ja-sabem-o-que-fazer-agora-ler-a-documentacao-sobre-k8s-e-docker-mas-de-olho-no-status-do-juju class=md-nav__link> Vocês já sabem o que fazer agora, Ler a documentacao sobre K8S e Docker, mas de olho no status do Juju. </a> </li> <li class=md-nav__item> <a href=#abra-o-cofre-vault-novamente class=md-nav__link> Abra o cofre VAULT novamente... </a> </li> <li class=md-nav__item> <a href=#configurando-o-octavia-com-as-alteracoes class=md-nav__link> Configurando o Octavia com as alteracoes </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> </a> </li> <li class=md-nav__item> <a href=#hold-your-breath class=md-nav__link> Hold your breath! </a> </li> <li class=md-nav__item> <a href=#criando-imagem class=md-nav__link> Criando imagem </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#webserver class=md-nav__link> WebServer </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Insper/computacao-nuvem/edit/master/docs/roteiros/5.K8s.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=containers-e-k8s>Containers e K8s<a class=headerlink href=#containers-e-k8s title="Permanent link">&para;</a></h1> <p>Objetivos</p> <ol> <li>Entender os conceitos básicos sobre Contêineres e seus Orquestradores.</li> <li>Instalar o Octavia no Openstack</li> <li>Integrar o Openstack e o Kubernetes</li> </ol> <p>Pré-requisitos:</p> <ol> <li>Terminar o capítulo anterior (SLA,DR e IaC)</li> <li>Realizar a leitura sobre o Docker. [<a href=https://docs.docker.com/engine/docker-overview/ >https://docs.docker.com/engine/docker-overview/</a>].</li> <li>Realizar a leitura sobre o Kubernetes. [<a href=https://kubernetes.io/docs/concepts/ >https://kubernetes.io/docs/concepts/</a>].</li> <li>Realizar a leitura do Octavia. [<a href=https://docs.openstack.org/octavia/latest/ >https://docs.openstack.org/octavia/latest/</a>].</li> <li>Realizar a leitura do Barbican. [<a href=https://docs.openstack.org/barbican/latest/ >https://docs.openstack.org/barbican/latest/</a>].</li> <li>Realizar a leitura dos Charms. [<a href=https://jaas.ai/vault>https://jaas.ai/vault</a>, <a href=https://jaas.ai/octavia>https://jaas.ai/octavia</a>, <a href=https://jaas.ai/barbican>https://jaas.ai/barbican</a>].</li> </ol> <details class=info> <summary>Info</summary> <p><strong>DIVISÃO DO ROTEIRO</strong> O Roteiro é dividido em 3 partes principais.</p> <ul> <li>Entendendo tipos de implantacoes - Visão Geral</li> <li>Adicionando Octavia (Load Balancer) na Nuvem privada(Openstack)</li> <li>Utilizando Docker e Kubernetes</li> </ul> </details> <h2 id=voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado>Voce chegou a um roteiro avancado, este Roteiro envolve a resolucao de problemas de implantacao, esperamos que você esteja preparado.<a class=headerlink href=#voce-chegou-a-um-roteiro-avancado-este-roteiro-envolve-a-resolucao-de-problemas-de-implantacao-esperamos-que-voce-esteja-preparado title="Permanent link">&para;</a></h2> <h2 id=target>TARGET<a class=headerlink href=#target title="Permanent link">&para;</a></h2> <h3 id=do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro>DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO<a class=headerlink href=#do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro title="Permanent link">&para;</a></h3> <p><img alt=Imagem-Topologia src=../../assets/images/nuvem.png width=600></p> <h2 id=tipo-de-implantacoes>Tipo de implantacoes<a class=headerlink href=#tipo-de-implantacoes title="Permanent link">&para;</a></h2> <h3 id=tradicional>Tradicional<a class=headerlink href=#tradicional title="Permanent link">&para;</a></h3> <p>Inicialmente, as organizações executavam aplicativos em servidores físicos. Os limites de recursos não podem ser definidos para aplicativos em servidores físicos, o que causa problemas de alocação de recursos. Por exemplo, se vários aplicativos estiverem sendo executados em um servidor físico, pode haver uma situação em que um aplicativo consuma mais recursos, resultando em um desempenho insatisfatório de outros aplicativos. A solução para isso é executar cada aplicativo em um servidor físico diferente. Mas isso não aumentou porque os recursos são subutilizados e é caro para as organizações manter muitos servidores físicos.</p> <h3 id=virtualizada>Virtualizada<a class=headerlink href=#virtualizada title="Permanent link">&para;</a></h3> <p>Como solução, a virtualização foi introduzida. Ele permite que você execute várias máquinas virtuais (VMs) na CPU de um único servidor físico. A virtualização permite que os aplicativos sejam isolados entre VMs e fornece um nível de segurança que as informações de um aplicativo não podem ser acessadas livremente por outro aplicativo. A virtualização permite uma melhor utilização dos recursos em servidores físicos e uma melhor escalabilidade, pois os aplicativos podem ser facilmente adicionados ou atualizados, os custos de hardware são reduzidos e muito mais. Com a virtualização, você pode apresentar um conjunto de recursos físicos como um cluster de máquinas virtuais descartáveis. Cada VM é uma máquina completa, executando todos os componentes, incluindo seu próprio sistema operacional, sobre hardware virtualizado.</p> <h3 id=conteinerizada>Conteinerizada<a class=headerlink href=#conteinerizada title="Permanent link">&para;</a></h3> <p>Os contêineres são pacotes leves do código do seu aplicativo, juntamente com dependências, como versões específicas de tempos de execução de linguagem de programação e bibliotecas necessárias para executar seus serviços de software. Os contêineres facilitam o compartilhamento de recursos de CPU, memória, armazenamento e rede no nível dos sistemas operacionais e oferecem um mecanismo de empacotamento lógico no qual os aplicativos podem ser abstraídos do ambiente em que realmente são executados.</p> <p><strong>Os contêineres virtualizam no nível do sistema operacional enquanto as VMs virtualizam no nível do hardware</strong></p> <p><img alt=Imagem-Topologia src=../../assets/images/container.png width=600></p> <h2 id=instalando-e-configurando-o-octavia-loadbalancer-para-openstack>Instalando e Configurando o Octavia (Loadbalancer para Openstack)<a class=headerlink href=#instalando-e-configurando-o-octavia-loadbalancer-para-openstack title="Permanent link">&para;</a></h2> <ul> <li>No servidor Main:</li> </ul> <p>Faça o download do arquivo loadbalancer-octavia.yaml no Github openstack-charmers/openstack-bundles</p> <p>Entre na pasta openstack</p> <p>Vamos pedir pro juju aplicar as modificacoes do bundle customizado com o overlay.</p> <p><code>juju deploy ./bundle.yaml --overlay loadbalancer-octavia.yaml</code></p> <h3 id=voces-ja-sabem-o-que-fazer-agora-ler-a-documentacao-sobre-k8s-e-docker-mas-de-olho-no-status-do-juju>Vocês já sabem o que fazer agora, Ler a documentacao sobre K8S e Docker, mas de olho no status do Juju.<a class=headerlink href=#voces-ja-sabem-o-que-fazer-agora-ler-a-documentacao-sobre-k8s-e-docker-mas-de-olho-no-status-do-juju title="Permanent link">&para;</a></h3> <p>Agora vamos criar os certificados necessários.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>mkdir -p demoCA/newcerts
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>touch demoCA/index.txt
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>touch demoCA/index.txt.attr
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out issuing_ca_key.pem
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>openssl req -x509 -passin pass:foobar -new -nodes -key issuing_ca_key.pem \
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    -config /etc/ssl/openssl.cnf \
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    -subj &quot;/C=US/ST=Somestate/O=Org/CN=www.example.com&quot; \
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    -days 30 \
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    -out issuing_ca.pem
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out controller_ca_key.pem
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>openssl req -x509 -passin pass:foobar -new -nodes \
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>        -key controller_ca_key.pem \
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>    -config /etc/ssl/openssl.cnf \
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>    -subj &quot;/C=US/ST=Somestate/O=Org/CN=www.example.com&quot; \
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>    -days 30 \
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>    -out controller_ca.pem
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>openssl req \
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>    -newkey rsa:2048 -nodes -keyout controller_key.pem \
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>    -subj &quot;/C=US/ST=Somestate/O=Org/CN=www.example.com&quot; \
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>    -out controller.csr
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>openssl ca -passin pass:foobar -config /etc/ssl/openssl.cnf \
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>    -cert controller_ca.pem -keyfile controller_ca_key.pem \
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>    -create_serial -batch \
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>    -in controller.csr -days 30 -out controller_cert.pem
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>cat controller_cert.pem controller_key.pem &gt; controller_cert_bundle.pem
</code></pre></div> <h3 id=abra-o-cofre-vault-novamente>Abra o cofre VAULT novamente...<a class=headerlink href=#abra-o-cofre-vault-novamente title="Permanent link">&para;</a></h3> <p>Adicionando variavel de ambiente VAULT:</p> <p><code>export VAULT_ADDR="http://&lt;IP of vault unit&gt;:8200"</code></p> <p>Removendo o selo, repita a operação com 3 keys diferentes:</p> <p><code>vault operator unseal &lt;Unseal Key&gt;</code></p> <p>Autorizando o charm:</p> <p><code>export VAULT_TOKEN=&lt;Initial Root Token&gt;</code></p> <p><code>vault token create -ttl=10m</code></p> <p>Anote o token gerado pelo comando e use abaixo:</p> <p><code>juju run-action --wait vault/leader authorize-charm token=&lt;token&gt;</code></p> <p><code>juju run-action --wait vault/leader generate-root-ca</code></p> <p>Ainda no Servidor <em>main</em>, vamos aumentar alguns limites:</p> <p><code>openstack quota set --cores 100 [ID do Projeto]</code></p> <p><code>openstack quota set --instances 100 [ID do Projeto]</code></p> <h3 id=configurando-o-octavia-com-as-alteracoes>Configurando o Octavia com as alteracoes<a class=headerlink href=#configurando-o-octavia-com-as-alteracoes title="Permanent link">&para;</a></h3> <ul> <li>Passo1</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>juju config octavia \
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    lb-mgmt-issuing-cacert=&quot;$(base64 issuing_ca.pem)&quot; \
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    lb-mgmt-issuing-ca-private-key=&quot;$(base64 issuing_ca_key.pem)&quot; \
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    lb-mgmt-issuing-ca-key-passphrase=foobar \
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    lb-mgmt-controller-cacert=&quot;$(base64 controller_ca.pem)&quot; \
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    lb-mgmt-controller-cert=&quot;$(base64 controller_cert_bundle.pem)&quot;
</code></pre></div> <ul> <li>Passo2</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>juju config octavia loadbalancer-topology=ACTIVE_STANDBY spare-pool-size=4
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>juju run-action --wait glance-simplestreams-sync/0 sync-images
</code></pre></div> <h3 id=_1><img alt=☕ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2615.svg title=:coffee:> <img alt=📖 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f4d6.svg title=:book:><a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <h3 id=hold-your-breath>Hold your breath!<a class=headerlink href=#hold-your-breath title="Permanent link">&para;</a></h3> <h3 id=criando-imagem>Criando imagem<a class=headerlink href=#criando-imagem title="Permanent link">&para;</a></h3> <ul> <li>Passo1</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>juju run-action --wait octavia-diskimage-retrofit/leader retrofit-image
</code></pre></div> <h3 id=_2><img alt=☕ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2615.svg title=:coffee:> <img alt=📖 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f4d6.svg title=:book:> <img alt=🕰 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f570.svg title=:clock:><a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <ul> <li>Passo2</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>openstack image list
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>openstack image set --tag octavia-diskimage-retrofit --tag octavia-amphora [id amphora image]
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>juju run-action --wait octavia/0 configure-resources
</code></pre></div> <p>No capítulo 3, foi realizada a implantação do Openstack no hardware disponível. Além de VMs, o Openstack consegue também manipular containers, tal qual o MaaS e o Juju. Contudo o grande problema é que não basta apenas criar e destruir um container, é preciso administrar uma complexa arquitetura, monitorando e controlando um conjunto de containers que representam uma implantação de um sistema.</p> <h2 id=webserver>WebServer<a class=headerlink href=#webserver title="Permanent link">&para;</a></h2> <ul> <li>Criar uma instância m1.small com IP público no Openstack, nomea-la como <strong>juju-openstack</strong></li> <li>Acessar a instancia criada</li> <li>Vamos criar um WebServer em NodeJS</li> <li>Criar o arquivo ~/hello-node/server.js</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>#!/usr/bin/env nodejs
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>var http = require(&#39;http&#39;);
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>var os = require(&#39;os&#39;);
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>var handleRequest = function(request, response) {
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    console.log(&#39;Received request for URL: &#39; + request.url);
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    response.writeHead(200);
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>    response.end(&#39;{ &quot;host&quot;: &#39; + os.hostname() + &#39;, &quot;message&quot;: &quot;Hello World!&quot;}&#39;);
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>};
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>var www = http.createServer(handleRequest);
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>www.listen(8080);
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>console.log(&#39;Server running at http://localhost:8080/&#39;);
</code></pre></div> <ul> <li>Testar o WebServer rodando localmente no terminal.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>sudo apt install nodejs
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>./server.js
</code></pre></div> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-1 WebServer</p> <ol> <li>De um print das Telas abaixo:</li> <li>Da aba network <em>topology</em> no <strong>OpenStack</strong>.</li> <li>Das regras do Security Group utilizado</li> <li>Da Aba do navegador com o WebServer Rodando.</li> </ol> </div> <h1 id=instalar-o-docker>Instalar o Docker<a class=headerlink href=#instalar-o-docker title="Permanent link">&para;</a></h1> <p>Arquitetura Docker <img alt=❗ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2757.svg title=:exclamation:></p> <p><img alt=Imagem-Topologia src=../../assets/images/docker.png width=600></p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>sudo apt-get update
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>sudo apt install build-essential apt-transport-https curl
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>curl -fsSL https://get.docker.com | sh -
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>sudo usermod -aG docker $USER
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>newgrp docker
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>docker version
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>docker run hello-world
</code></pre></div> <ul> <li>Criar uma um arquivo ~/hello-node/Dockerfile que dará origem ao container</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>FROM node:6.9.2
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>EXPOSE 8080
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>COPY server.js .
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>CMD node server.js
</code></pre></div> <ul> <li>Montar a imagem local (Cria um container com esta aplicacao webserver)</li> </ul> <p><code>docker build -t hello-node:v1 ./hello-node/</code></p> <ul> <li>Rodar o container com a imagem criada.</li> </ul> <p><code>docker container run hello-node:v1</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-2 Docker</p> <ol> <li>De um print das Telas abaixo:</li> <li>WebServer Rodando no navegador.</li> </ol> </div> <h2 id=docker-hub>Docker Hub<a class=headerlink href=#docker-hub title="Permanent link">&para;</a></h2> <ul> <li>Criar individualmente um login na <a href=https://hub.docker.com/ >https://hub.docker.com/</a></li> </ul> <p>• Fazer o login no Docker • Aplicar a tag na imagem e dar o push do Docker Hub • Para mais detalhes <code>docker --help</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>QUESTOES-1</p> <ol> <li>O que é Docker Swarm?</li> <li>O que é Docker Registry?</li> <li>O que é Docker Engine? </li> </ol> </div> <h1 id=kubernetes-aka-k8s>Kubernetes aka k8s<a class=headerlink href=#kubernetes-aka-k8s title="Permanent link">&para;</a></h1> <p><img alt=Imagem-Topologia src=../../assets/images/kubernetes.png width=600></p> <ul> <li>Para facilitar o deploy do Kubernetes vamos utilizar uma "velha conhecida". </li> </ul> <h2 id=deja-vu-juju-reborn>Deja-vu (Juju Reborn)<a class=headerlink href=#deja-vu-juju-reborn title="Permanent link">&para;</a></h2> <p>O Dashboard do Openstack possui alguns termos (region, instance type, security group, etc) que são semelhantes ao da AWS. Como visto anteriormente, Juju consegue operar sobre Public Cloud, Private Cloud, Bare-metal e Container. Para o setup ficar completo, agora vamos utilizar o Juju sobre o Openstack.</p> <details class=dicas> <summary>Dicas</summary> <p><a href=https://juju.is/docs/olm/openstack>Documentacao - adicionar Openstack como cloud</a><br> <a href=https://ubuntu.com/kubernetes/docs/openstack-integration>Documentacao - adicionar integrador obrigatório</a><br> <a href=https://github.com/Insper/computacao-nuvem/blob/main/docs/bundle.yaml>Bundle modificado do Kubernetes-core</a> </p> </details> <ul> <li>Acesse a instância m1.tiny criada no início do roteiro.</li> <li>Fazer a instalação do Juju.</li> <li>Adicione o Openstack como Cloud Provider no Juju.</li> <li> <p>Fazer o deploy do Kubernetes-core</p> </li> <li> <p>Instalar kubectl no cliente via snap. <code>sudo snap install kubectl --classic</code></p> </li> <li> <p>Verificar a configuração do Kubernetes via kubectl <code>kubectl cluster-info</code></p> </li> <li> <p>Caso tenha problemas ver: <a href=https://ubuntu.com/kubernetes/docs/operations>documentacao-kubernetes</a></p> </li> <li>Configurar o kubectl proxy para utilização externa na porta 8080.</li> <li>Acessar o Dashboard.</li> </ul> <h2 id=fazendo-um-deploy>Fazendo um Deploy<a class=headerlink href=#fazendo-um-deploy title="Permanent link">&para;</a></h2> <ul> <li>Fazer o deploy da imagem docker criada na sessão anterior</li> </ul> <p><code>kubectl run hello-node --image=[user]/hello-node:v1 --port=8080</code></p> <ul> <li>Verificar no terminal: <code>kubectl get all</code></li> <li>Verificar o deploy status no Dashboard</li> <li>Expandir o deploy para 5 réplicas do pod</li> </ul> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-3 Dashboard Kubernetes</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do dashboard Kubernetes com as 5 replicas</li> </ol> </div> <h2 id=acessando-o-deploy>Acessando o Deploy<a class=headerlink href=#acessando-o-deploy title="Permanent link">&para;</a></h2> <p>Criar um serviço que irá expor o deploy</p> <h3 id=alternativa-i-clusterip-com-ingress>Alternativa I - ClusterIP com Ingress<a class=headerlink href=#alternativa-i-clusterip-com-ingress title="Permanent link">&para;</a></h3> <p><code>kubectl expose deployment hello-node --type=ClusterIP</code></p> <ul> <li>Criar o arquivo ingress.yaml</li> </ul> <p><div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>apiVersion: extensions/v1beta1
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>kind: Ingress
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>metadata:
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>  name: hello-node-ingress
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>spec:
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>  rules:
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>  - host: hello-node.[ip do kubernetes-worker].xip.io
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    http:
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>      paths:
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>      - path: /
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>        backend:
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>          serviceName: hello-node
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>          servicePort: 8080
</code></pre></div> * Aplicar arquivo ingress ao K8s</p> <p><code>kubectl create -f ingress.yaml</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-4 Expose Service</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> </ol> </div> <h3 id=alternativa-ii-nodeport>Alternativa II - NodePort<a class=headerlink href=#alternativa-ii-nodeport title="Permanent link">&para;</a></h3> <p><code>kubectl expose deployment hello-node --type=NodePort</code></p> <ul> <li>Verificar qual porta foi designada e liberar o security group do worker</li> </ul> <p><code>juju run --unit kubernetes-worker/[# worker] "open-port [porta]"</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-4 Acessar o deploy</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> <li>WebServer Rodando no navegador utilizando a porta aberta.</li> </ol> </div> <h2 id=alterando-o-deploy>Alterando o deploy<a class=headerlink href=#alterando-o-deploy title="Permanent link">&para;</a></h2> <ul> <li>Alterar o arquivo server.js</li> <li>Montar uma nova imagem com tag v2 e faça um push</li> <li>Fazer um deploy de um pod de testes</li> <li>Testar as alterações</li> <li>Fazer a implantação imediata em produção:</li> </ul> <p><code>kubectl set image deployment/hello-node hello-node=[user]/hello-node:v2</code></p> <div class="admonition exercise"> <p class=admonition-title>Exercise</p> <p>CheckPoint-5 Modificacao</p> <ol> <li>De um print das Telas abaixo:</li> <li>Do comando -&gt; kubectl get all</li> <li>WebServer modificado Rodando no navegador utilizando a porta aberta.</li> </ol> </div> <h2 id=conclusao-somente-para-pensar><strong>Conclusão:</strong> <em>SOMENTE PARA PENSAR</em> <img alt=❗ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2757.svg title=:exclamation:> <img alt=❗ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2757.svg title=:exclamation:> <img alt=❗ class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/2757.svg title=:exclamation:><a class=headerlink href=#conclusao-somente-para-pensar title="Permanent link">&para;</a></h2> <p>Você desempenhou uma implantação em tempo real usando Kubernetes e DockerHub. Como seria uma arquitetura de Continuous Integration/Continuous Delivery (CI/CD) real utilizando Kubernetes?</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - Tiago Demay </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/squidfunk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://gitter.im/squidfunk/mkdocs-material target=_blank rel=noopener title=gitter.im class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"/></svg> </a> <a href=https://hub.docker.com/r/squidfunk/mkdocs-material/ target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://pypi.org/project/mkdocs-material/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg> </a> <a href=https://www.linkedin.com/in/tiago-demay target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.9c69f0bc.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.0.0/js-yaml.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://cdn.jsdelivr.net/gh/insper-education/active-handout-plugins-js@main/package/plugin-bundle.js></script> </body> </html>